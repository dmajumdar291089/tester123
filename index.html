<!DOCTYPE html>
<html>
<body>

<h1>My Website</h1>

<p><a onclick="startApp()" target="_system">Open App</a></p>

<script>
	//var appurl = 'sbiyono://';
	//var appurl = 'https://yono.sbirealty.in/openInYono?reraId=TEST090919';
	var appurl = 'https://dmajumdar291089.github.io/MyTestPoc/openInYono?myTestParam=TEST000112233';
	//var appstore = 'https://sbiyono.sbi/app';
	
	/*var timeout;
	function preventPopup() {
		clearTimeout(timeout);
		timeout = null;
		window.removeEventListener('pagehide', preventPopup);
	}*/
	
	function startApp() {
		$.ajax(appurl)
  			.done(function() {
    				// done() is called on any 200 response codes (200, 201, etc)
    				window.location = appurl;
  			})
  			.fail(function() {
    				// fail() is called on any 400 or 500 response codes (400, 401, 404, 500, etc)
    				if(navigator.userAgent.indexOf('Android')>0) {
					window.location="https://goo.gl/ccfchV";
				} else if(navigator.userAgent.indexOf('iPhone')>0) {
					window.location="https://goo.gl/X6WDiX";
				} else {
					document.location = appstore;
				}
  			}
		);
		
		/*window.location = appurl;
		timeout = setTimeout(function() {
			//if(confirm('You do not seem to have the App installed, do you want to go download it now?')) {
				if(navigator.userAgent.indexOf('Android')>0) {
					window.location="https://goo.gl/ccfchV";
				} else if(navigator.userAgent.indexOf('iPhone')>0) {
					window.location="https://goo.gl/X6WDiX";
				} else {
					document.location = appstore;
				}
			//}
		}, 1000);
		window.addEventListener('pagehide', preventPopup);*/
	}
</script>

</body>
</html>

